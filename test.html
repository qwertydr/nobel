<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IARCO 2025 Certificate Generator</title>
    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #FFD700;
            --gold-dark: #B8860B;
            --blue: #1E3A8A;
            --blue-light: #3B82F6;
            --blue-dark: #1E40AF;
            --white: #FFFFFF;
            --gray-light: #F3F4F6;
            --gray: #6B7280;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            color: var(--white);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--gold-light);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: var(--white);
            opacity: 0.9;
        }
        
        .search-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .search-form {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 12px 20px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.4);
            transform: translateY(-2px);
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
            color: var(--blue);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(212, 175, 55, 0.4);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .certificate-preview {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            position: relative;
            display: none;
        }
        
        .certificate-header {
            background: linear-gradient(135deg, var(--blue) 0%, var(--blue-dark) 100%);
            padding: 30px;
            text-align: center;
            color: var(--white);
            position: relative;
        }
        
        .certificate-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--gold-light);
        }
        
        .certificate-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .medal-container {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 100px;
            background: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }
        
        .medal-svg {
            width: 70px;
            height: 70px;
        }
        
        .certificate-body {
            padding: 40px;
            color: #333;
            min-height: 500px;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23f8fafc"/><path d="M0 0 L100 100 M100 0 L0 100" stroke="%23e2e8f0" stroke-width="0.5"/></svg>');
        }
        
        .certificate-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }
        
        .certificate-id {
            text-align: right;
            margin-bottom: 30px;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .student-name {
            font-size: 2.8rem;
            text-align: center;
            margin-bottom: 20px;
            color: var(--blue);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .certificate-text {
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .student-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .detail-item {
            background: rgba(30, 58, 138, 0.05);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--gold);
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--blue);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .flag-svg {
            width: 20px;
            height: 15px;
            display: inline-block;
        }
        
        .performance-details {
            background: rgba(212, 175, 55, 0.1);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .performance-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--blue);
            text-align: center;
            font-weight: 600;
        }
        
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .performance-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .performance-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--blue);
            margin-bottom: 5px;
        }
        
        .performance-label {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .rank-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--blue);
            color: white;
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .signature-area {
            display: flex;
            justify-content: space-between;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid var(--gold);
        }
        
        .signature {
            text-align: center;
        }
        
        .signature-line {
            width: 200px;
            height: 1px;
            background: #333;
            margin: 40px auto 10px;
        }
        
        .signature-name {
            font-weight: 600;
            color: var(--blue);
        }
        
        .signature-title {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(30, 58, 138, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }
        
        .spinner {
            width: 70px;
            height: 70px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--gold-light);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: white;
            font-size: 1.2rem;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .search-form {
                flex-direction: column;
            }
            
            .search-input {
                min-width: auto;
            }
            
            .student-name {
                font-size: 2rem;
            }
            
            .certificate-title {
                font-size: 2rem;
            }
            
            .signature-area {
                flex-direction: column;
                gap: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>IARCO 2025 Certificate Generator</h1>
            <p class="subtitle">Generate your achievement certificate with a single click</p>
        </header>
        
        <section class="search-section">
            <div class="search-form">
                <input type="text" class="search-input" id="studentSearch" placeholder="Enter your name to search...">
                <button class="btn btn-primary" id="generateBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                    </svg>
                    Generate Certificate
                </button>
            </div>
        </section>
        
        <section class="certificate-preview" id="certificatePreview">
            <div class="medal-container">
                <div class="medal-svg" id="medalSvg"></div>
            </div>
            
            <div class="certificate-header">
                <h2 class="certificate-title">Certificate of Achievement</h2>
                <p class="certificate-subtitle">International Academic Research Conference for Youth (IARCO) 2025</p>
            </div>
            
            <div class="certificate-body">
                <div class="certificate-content">
                    <div class="certificate-id" id="certificateId">Certification ID: IARCO-2025-JR-001-1734567890</div>
                    
                    <h1 class="student-name" id="studentName">Student Name</h1>
                    
                    <p class="certificate-text">
                        This certificate is proudly presented to recognize outstanding achievement in the 
                        International Academic Research Conference for Youth (IARCO) 2025. The recipient 
                        has demonstrated exceptional research skills, academic excellence, and dedication 
                        to advancing knowledge in their field of study.
                    </p>
                    
                    <div class="student-details">
                        <div class="detail-item">
                            <div class="detail-label">Class / Category</div>
                            <div class="detail-value" id="studentClass">Junior Category</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">School</div>
                            <div class="detail-value" id="studentSchool">School Name</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Country</div>
                            <div class="detail-value">
                                <span class="flag-svg" id="countryFlag"></span>
                                <span id="studentCountry">Country Name</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Research Title</div>
                            <div class="detail-value" id="researchTitle">Research Proposal Title</div>
                        </div>
                    </div>
                    
                    <div class="performance-details">
                        <h3 class="performance-title">Performance Details</h3>
                        <div class="performance-grid">
                            <div class="performance-item">
                                <div class="performance-value" id="overallRank">1st</div>
                                <div class="performance-label">Overall Rank</div>
                                <div class="rank-badge" id="rankBadge">Gold Medal</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value" id="researchScore">95</div>
                                <div class="performance-label">Research Proposal Score</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value" id="presentationScore">92</div>
                                <div class="performance-label">Presentation Score</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value" id="totalScore">187</div>
                                <div class="performance-label">Total Score</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="signature-area">
                        <div class="signature">
                            <div class="signature-line"></div>
                            <div class="signature-name">Dr. Sarah Johnson</div>
                            <div class="signature-title">Conference Chair, IARCO 2025</div>
                        </div>
                        <div class="signature">
                            <div class="signature-line"></div>
                            <div class="signature-name">Prof. Michael Chen</div>
                            <div class="signature-title">Head of Judging Committee</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <div class="loading-text">Generating your certificate...</div>
        </div>
        
        <footer>
            <p>IARCO 2025 Certificate Generator | International Academic Research Conference for Youth</p>
        </footer>
    </div>

    <script>
        // Sample data (in a real implementation, this would be loaded from JSON files)
        const students = [
            {
                "student_id": "v1MrV4dT",
                "name": "Afia Anjum Aboni",
                "school": "Rajuk Uttara Model College",
                "category": "Junior",
                "year": 2024,
                "country": "Bangladesh",
                "research_proposal_title": "The Relevance of Class Disparity in the Implementation of Climate-Related Policies; an Investigation into the Different Socioeconomic Classes of Dhaka",
                "research_paper": {
                    "research_problem": 17,
                    "existing_literature": 7,
                    "research_question": 20,
                    "methodology": 18,
                    "research_topic": 12,
                    "quality_of_writing": 4,
                    "plagiarism_check_percentile": 3,
                    "presentation": {
                        "persuasiveness": 15,
                        "video_quality": 15,
                        "research_problem": 15,
                        "research_question": 13,
                        "methodology": 10
                    }
                },
                "plagiarismPenalty": 15,
                "researchPaperScore": 78,
                "presentationScore": 68,
                "submissionScore": 146,
                "scaledFinalScore": 131,
                "viewProposal": "https://drive.google.com/open?id=1aBuuRXyiIBx-908Tujbzt2vXRqBq_rzX",
                "videoPitch": "https://drive.google.com/drive/folders/17Xg1wH9C8eD0wmfxn1Z3FnDZmHy3OTIV",
                "proposal_comment": "No Comment.",
                "presentation_comment": "No Comment."
            },
            {
                "student_id": "LXd6a9ey",
                "name": "Adira Safwan",
                "school": "Maple Leaf International School",
                "category": "Senior", 
                "year": 2024,
                "country": "Bangladesh",
                "research_proposal_title": "Exploring Differences in Social Media Literacy Between Digital Natives and Digital Immigrants: A Comparative Analysis of Critical Skills and Digital Adaptability",
                "research_paper": {
                    "research_problem": 16,
                    "existing_literature": 5,
                    "research_question": 15,
                    "methodology": 17,
                    "research_topic": 13,
                    "quality_of_writing": 3,
                    "plagiarism_check_percentile": 17,
                    "presentation": {
                        "persuasiveness": 18,
                        "video_quality": 18,
                        "research_problem": 16,
                        "research_question": 16,
                        "methodology": 17
                    }
                },
                "plagiarismPenalty": 0,
                "researchPaperScore": 69,
                "presentationScore": 85,
                "submissionScore": 154,
                "scaledFinalScore": 154,
                "viewProposal": "https://iarco.org/storage/2024/junior/research_proposal/02_Adira_RP_Junior_IARCO_2024.pdf",
                "videoPitch": "https://youtu.be/Fh9clCxc2RU",
                "proposal_comment": "No Comment.",
                "presentation_comment": "No Comment."
            }
        ];

        const flags = {
            "Bangladesh": `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 12'><rect width='20' height='12' fill='#006a4e'/><circle cx='8.5' cy='6' r='3.5' fill='#f42a41'/></svg>`,
            "Japan": `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 12'><rect width='20' height='12' fill='#ffffff'/><circle cx='10' cy='6' r='3.6' fill='#bc002d'/></svg>`,
            "Canada": `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 12'><rect width='20' height='12' fill='#ff0000'/><rect x='6' width='8' height='12' fill='#ffffff'/><path fill='#ff0000' d='M10 2.2 8.8 3.5h0.7v1.8h0.9V3.5h0.7L10 2.2zm0 6.6-1.4-2.1h0.9v-1h0.9v1h0.9L10 8.8z'/></svg>`
        };

        const medals = {
            "gold": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#FFD700" stroke="#D4AF37" stroke-width="3"/><circle cx="50" cy="50" r="35" fill="#FFF9C4" stroke="#D4AF37" stroke-width="2"/><text x="50" y="55" text-anchor="middle" font-size="24" font-weight="bold" fill="#B8860B">1st</text></svg>`,
            "silver": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#C0C0C0" stroke="#A8A8A8" stroke-width="3"/><circle cx="50" cy="50" r="35" fill="#F0F0F0" stroke="#A8A8A8" stroke-width="2"/><text x="50" y="55" text-anchor="middle" font-size="24" font-weight="bold" fill="#707070">2nd</text></svg>`,
            "bronze": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#CD7F32" stroke="#8B4513" stroke-width="3"/><circle cx="50" cy="50" r="35" fill="#E6C9A8" stroke="#8B4513" stroke-width="2"/><text x="50" y="55" text-anchor="middle" font-size="24" font-weight="bold" fill="#8B4513">3rd</text></svg>`,
            "honorable": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><polygon points="50,5 90,30 90,70 50,95 10,70 10,30" fill="#3B82F6" stroke="#1E40AF" stroke-width="3"/><text x="50" y="60" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Honor</text></svg>`,
            "finalist": `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#1E3A8A" stroke="#1E40AF" stroke-width="3"/><circle cx="50" cy="50" r="35" fill="#3B82F6" stroke="#1E40AF" stroke-width="2"/><text x="50" y="55" text-anchor="middle" font-size="18" font-weight="bold" fill="white">Finalist</text></svg>`
        };

        const certificates = {
            "2024": "certificate/2024.pdf",
            "2025": "certificate/2025.pdf"
        };

        // Calculate ranks per category and year
        function calculateRanks(students) {
            // Group students by year and category
            const grouped = {};
            students.forEach(student => {
                const key = `${student.year}-${student.category}`;
                if (!grouped[key]) grouped[key] = [];
                grouped[key].push(student);
            });
            
            // Sort each group by scaledFinalScore and assign ranks
            Object.keys(grouped).forEach(key => {
                grouped[key].sort((a, b) => b.scaledFinalScore - a.scaledFinalScore);
                grouped[key].forEach((student, index) => {
                    student.rank = index + 1;
                });
            });
            
            return students;
        }

        // Generate certification ID
        function generateCertificationId(student) {
            const year = student.year;
            const category = student.category.substring(0, 2).toUpperCase();
            const rank = student.rank.toString().padStart(3, '0');
            const timestamp = Date.now().toString().slice(-6);
            
            return `IARCO-${year}-${category}-${rank}-${timestamp}`;
        }

        // Determine medal based on rank
        function getMedal(rank) {
            if (rank === 1) return { type: "gold", name: "Gold Medal" };
            if (rank === 2) return { type: "silver", name: "Silver Medal" };
            if (rank === 3) return { type: "bronze", name: "Bronze Medal" };
            if (rank >= 4 && rank <= 10) return { type: "honorable", name: "Honorable Mention" };
            return { type: "finalist", name: "Finalist" };
        }

        // Format rank with suffix
        function formatRank(rank) {
            if (rank === 1) return "1st";
            if (rank === 2) return "2nd";
            if (rank === 3) return "3rd";
            return `${rank}th`;
        }

        // Display certificate
        function displayCertificate(student) {
            // Calculate ranks first
            calculateRanks([student]);
            
            const medal = getMedal(student.rank);
            const certificationId = generateCertificationId(student);
            
            document.getElementById('certificateId').textContent = `Certification ID: ${certificationId}`;
            document.getElementById('studentName').textContent = student.name;
            document.getElementById('studentClass').textContent = `${student.category} Category`;
            document.getElementById('studentSchool').textContent = student.school;
            document.getElementById('studentCountry').textContent = student.country;
            document.getElementById('researchTitle').textContent = student.research_proposal_title;
            
            document.getElementById('overallRank').textContent = formatRank(student.rank);
            document.getElementById('researchScore').textContent = student.researchPaperScore;
            document.getElementById('presentationScore').textContent = student.presentationScore;
            document.getElementById('totalScore').textContent = student.scaledFinalScore;
            document.getElementById('rankBadge').textContent = medal.name;
            
            // Set flag SVG
            const flagSvg = flags[student.country] || flags['Japan']; // Default to Japan if country not found
            document.getElementById('countryFlag').innerHTML = flagSvg;
            
            // Set medal SVG
            document.getElementById('medalSvg').innerHTML = medals[medal.type];
            
            // Show certificate
            document.getElementById('certificatePreview').style.display = 'block';
            
            // Scroll to certificate
            document.getElementById('certificatePreview').scrollIntoView({ behavior: 'smooth' });
        }

        // Search for student
        function searchStudent() {
            const searchTerm = document.getElementById('studentSearch').value.trim().toLowerCase();
            if (!searchTerm) {
                alert('Please enter a name to search.');
                return;
            }
            
            const foundStudent = students.find(student => 
                student.name.toLowerCase().includes(searchTerm)
            );
            
            if (foundStudent) {
                displayCertificate(foundStudent);
            } else {
                alert('Student not found. Please check the name and try again.');
            }
        }

        // Generate PDF (simulated)
        function generatePDF() {
            const certificatePreview = document.getElementById('certificatePreview');
            if (certificatePreview.style.display === 'none') {
                alert('Please search for and display a certificate first.');
                return;
            }
            
            // Show loading overlay
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            // Simulate PDF generation
            setTimeout(() => {
                // Hide loading overlay
                loadingOverlay.style.display = 'none';
                
                // Create a simulated download
                const studentName = document.getElementById('studentName').textContent;
                const fileName = `IARCO_2025_Certificate_${studentName.replace(/\s+/g, '_')}.pdf`;
                
                // In a real implementation, this would generate an actual PDF
                // For this demo, we'll just show a success message
                alert(`Certificate for ${studentName} has been generated and downloaded as ${fileName}`);
                
                // In a real implementation, you would use a library like jsPDF
                // to generate an actual PDF file and trigger download
            }, 2000);
        }

        // Event listeners
        document.getElementById('generateBtn').addEventListener('click', function() {
            searchStudent();
        });

        document.getElementById('studentSearch').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchStudent();
            }
        });

        // Add a download button event listener (in a real implementation)
        // This would be connected to the actual PDF generation
        document.addEventListener('DOMContentLoaded', function() {
            // For demo purposes, let's display a sample certificate
            // In a real implementation, this would not be here
            setTimeout(() => {
                displayCertificate(students[0]);
            }, 500);
        });
    </script>
</body>
</html>
