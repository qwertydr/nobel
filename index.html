<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Award Certificate Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;700;1,300&family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --paper:#f8f6f1;
      --accent:#b78b2f;
      --text:#222;
      --muted:#666;
    }
    *{box-sizing:border-box}
    body{font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; background:linear-gradient(180deg,#efefef 0%, #fafafa 100%); color:var(--text);}
    .container{max-width:1100px;margin:40px auto;padding:20px;display:grid;grid-template-columns:1fr 1fr;gap:20px}
    @media (max-width:900px){.container{grid-template-columns:1fr;padding:12px;margin:18px auto}}

    /* Form */
    .panel{background:#fff;border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(20,20,20,0.08)}
    .panel h2{margin:0 0 12px;font-size:18px}
    .field{display:flex;flex-direction:column;margin-bottom:10px}
    .field label{font-size:13px;color:var(--muted);margin-bottom:6px}
    .field input[type=text], .field textarea, .field input[type=date], .field select{padding:10px;border:1px solid #e2e2e2;border-radius:8px;font-size:14px}
    textarea{min-height:100px;resize:vertical}
    .row{display:flex;gap:10px}
    .small{flex:1}
    .actions{display:flex;gap:10px;align-items:center;margin-top:8px}
    button{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    button.secondary{background:#eee;color:var(--text)}

    /* Preview (certificate) */
    .preview-wrap{display:flex;align-items:center;justify-content:center}
    .certificate{width:100%;max-width:800px;background:var(--paper);padding:40px;border:12px solid rgba(183,139,47,0.18);border-radius:6px;position:relative;box-shadow:0 10px 30px rgba(30,30,30,0.08)}
    @media (max-width:900px){.certificate{padding:26px;border-width:8px}}
    .cert-inner{background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));padding:28px;border:4px solid rgba(183,139,47,0.06)}
    .logo{display:flex;gap:12px;align-items:center;margin-bottom:18px}
    .emblem{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700}
    .title{font-family:Merriweather,serif;font-size:28px;text-align:center;color:var(--text);letter-spacing:1px;margin-bottom:6px}
    .subtitle{font-size:13px;text-align:center;color:var(--muted);margin-bottom:18px}
    .recipient{font-family:Merriweather,serif;font-size:34px;text-align:center;margin:18px 0;color:var(--text)}
    .line{height:1px;background:linear-gradient(90deg,transparent,#e0cfa0,transparent);margin:20px 0}
    .desc{text-align:center;font-size:15px;color:var(--muted);line-height:1.5;max-width:760px;margin:0 auto 20px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:28px}
    .sig{display:flex;flex-direction:column;align-items:center}
    .sig .name{font-weight:700}
    .sig .role{font-size:12px;color:var(--muted)}

    /* watermark */
    .watermark{position:absolute;left:50%;top:45%;transform:translate(-50%,-50%);opacity:0.06;font-size:130px;font-family:Merriweather,serif;color:var(--text);pointer-events:none;user-select:none}

    /* small helper */
    .note{font-size:13px;color:var(--muted);margin-top:8px}
    .footer{font-size:12px;color:var(--muted);text-align:center;margin-top:12px}
  </style>
</head>
<body>
  <div class="container">
    <div class="panel">
      <h2>Certificate Data</h2>
      <div class="field">
        <label>Recipient full name</label>
        <input id="recipient" type="text" value="Arya Nargis Ahmed">
      </div>
      <div class="field">
        <label>Award title</label>
        <input id="award" type="text" value="Award of Scientific Excellence">
      </div>
      <div class="field">
        <label>Reason / Citation</label>
        <textarea id="citation">For outstanding contributions to the field of experimental plant photobiology and exemplary scholarly dedication.</textarea>
      </div>
      <div class="row">
        <div class="field small">
          <label>Date</label>
          <input id="date" type="date" value="2025-10-12">
        </div>
        <div class="field small">
          <label>Location (optional)</label>
          <input id="location" type="text" value="Dhaka, Bangladesh">
        </div>
      </div>
      <div class="row">
        <div class="field small">
          <label>Issuer name</label>
          <input id="issuer" type="text" value="Youth Research Journal">
        </div>
        <div class="field small">
          <label>Issuer role</label>
          <input id="issuerRole" type="text" value="Program Director">
        </div>
      </div>
      <div class="actions">
        <button id="previewBtn" class="secondary">Live preview updates automatically</button>
        <button id="downloadBtn">Generate JPG</button>
        <div class="note">Tip: set a recent date then click Generate JPG. High-resolution download enabled.</div>
      </div>
      <div class="footer">This template is for educational and personal use. It is <strong>not</strong> an official or exact replica of any real award certificate.</div>
    </div>

    <div class="preview-wrap">
      <div id="certificate" class="certificate">
        <div class="watermark" id="wm">AWARD</div>
        <div class="cert-inner">
          <div class="logo">
            <div style="flex:1;">
              <svg width="72" height="72" viewBox="0 0 100 100" aria-hidden>
                <defs>
                  <linearGradient id="g1" x1="0" x2="1">
                    <stop offset="0" stop-color="#d6b66a" />
                    <stop offset="1" stop-color="#9b7a38" />
                  </linearGradient>
                </defs>
                <circle cx="50" cy="50" r="45" fill="url(#g1)" stroke="#b38a2f" stroke-width="2"></circle>
                <g transform="translate(50 50) scale(0.7)" fill="#fff">
                  <path d="M0-30 L8-8 L28-2 L12 8 L16 28 L0 18 L-16 28 L-12 8 L-28-2 L-8-8 Z"></path>
                </g>
              </svg>
            </div>
            <div style="flex:4">
              <div class="title" id="titleText">Award of Scientific Excellence</div>
              <div class="subtitle">Presented to</div>
            </div>
          </div>

          <div class="recipient" id="recipientText">Arya Nargis Ahmed</div>
          <div class="line"></div>
          <div class="desc" id="citationText">For outstanding contributions to the field of experimental plant photobiology and exemplary scholarly dedication.</div>

          <div class="meta">
            <div>
              <div style="font-size:13px;color:var(--muted)">Date & place</div>
              <div style="font-weight:700" id="dateText">October 12, 2025 — Dhaka, Bangladesh</div>
            </div>
            <div class="sig">
              <div class="name" id="issuerText">Youth Research Journal</div>
              <div class="role" id="issuerRoleText">Program Director</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- include html2canvas from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    // Utility: format date to readable
    function formatDateISO(iso){
      if(!iso) return '';
      const d = new Date(iso);
      if(isNaN(d)) return iso;
      return d.toLocaleDateString(undefined,{year:'numeric',month:'long',day:'numeric'});
    }

    // Elements
    const recipient = document.getElementById('recipient');
    const award = document.getElementById('award');
    const citation = document.getElementById('citation');
    const date = document.getElementById('date');
    const location = document.getElementById('location');
    const issuer = document.getElementById('issuer');
    const issuerRole = document.getElementById('issuerRole');

    const recipientText = document.getElementById('recipientText');
    const titleText = document.getElementById('titleText');
    const citationText = document.getElementById('citationText');
    const dateText = document.getElementById('dateText');
    const issuerText = document.getElementById('issuerText');
    const issuerRoleText = document.getElementById('issuerRoleText');
    const wm = document.getElementById('wm');

    function updatePreview(){
      recipientText.textContent = recipient.value || '— Recipient name —';
      titleText.textContent = award.value || '— Award title —';
      citationText.textContent = citation.value || '';
      const loc = location.value ? (' — ' + location.value) : '';
      dateText.textContent = (date.value ? formatDateISO(date.value) : '—') + loc;
      issuerText.textContent = issuer.value || '';
      issuerRoleText.textContent = issuerRole.value || '';
      wm.textContent = (award.value || 'AWARD').toUpperCase();
    }

    // Wire events
    [recipient, award, citation, date, location, issuer, issuerRole].forEach(el=>{
      el.addEventListener('input', updatePreview);
    });

    updatePreview();

    // Download as JPG using html2canvas
    document.getElementById('downloadBtn').addEventListener('click', async ()=>{
      const node = document.getElementById('certificate');
      // temporarily set a white background behind the certificate container for rendering
      node.style.background = getComputedStyle(node).backgroundColor || '#ffffff';
      try{
        const scale = 3; // high-res
        const canvas = await html2canvas(node, {scale, useCORS:true, backgroundColor:null});
        const dataURL = canvas.toDataURL('image/jpeg', 0.92);
        const link = document.createElement('a');
        link.download = (recipient.value ? recipient.value.replace(/\s+/g,'_') : 'certificate') + '.jpg';
        link.href = dataURL;
        document.body.appendChild(link);
        link.click();
        link.remove();
      }catch(err){
        alert('Error generating image: '+err.message);
      }
    });

    // preview button: a small helper to flash preview
    document.getElementById('previewBtn').addEventListener('click', ()=>{
      const el = document.getElementById('certificate');
      el.style.transform = 'scale(0.997)';
      setTimeout(()=>el.style.transform='scale(1)',220);
    });

    // responsive tweak: if viewport small, scale certificate for better viewing
    function adjustScale(){
      const wrap = document.querySelector('.preview-wrap');
      const cert = document.querySelector('.certificate');
      if(window.innerWidth < 900){
        cert.style.maxWidth = '560px';
      }else{
        cert.style.maxWidth = '800px';
      }
    }
    window.addEventListener('resize', adjustScale);
    adjustScale();

  </script>
</body>
</html>
