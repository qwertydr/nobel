<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Two‑Page Nobel‑Style Certificate Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;700;1,300&family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root{--paper:#fbf9f4;--accent:#b78b2f;--text:#222;--muted:#666}
    *{box-sizing:border-box}
    body{font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:0;background:linear-gradient(180deg,#efefef 0%, #fafafa 100%);color:var(--text)}
    .app{max-width:1200px;margin:28px auto;padding:18px;display:grid;grid-template-columns:1fr 1fr;gap:20px}
    @media (max-width:1000px){.app{grid-template-columns:1fr}}
    .panel{background:#fff;border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(20,20,20,0.06)}
    .panel h2{margin:0 0 12px;font-size:18px}
    .field{display:flex;flex-direction:column;margin-bottom:10px}
    .field label{font-size:13px;color:var(--muted);margin-bottom:6px}
    .field input[type=text], .field textarea, .field input[type=date], .field select{padding:10px;border:1px solid #e2e2e2;border-radius:8px;font-size:14px}
    textarea{min-height:90px;resize:vertical}
    .row{display:flex;gap:10px}
    .small{flex:1}
    .actions{display:flex;gap:10px;align-items:center;margin-top:8px}
    button{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    button.secondary{background:#eee;color:var(--text)}
    .note{font-size:13px;color:var(--muted)}

    /* pages preview */
    .preview{display:flex;flex-direction:column;gap:18px;align-items:center}
    .page{width:100%;max-width:820px;background:var(--paper);padding:36px;border:12px solid rgba(183,139,47,0.14);border-radius:6px;position:relative;box-shadow:0 10px 30px rgba(30,30,30,0.06)}
    .page-inner{background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));padding:24px;border:4px solid rgba(183,139,47,0.06)}
    .title{font-family:Merriweather,serif;font-size:26px;text-align:center;color:var(--text);letter-spacing:1px;margin-bottom:6px}
    .subtitle{font-size:13px;text-align:center;color:var(--muted);margin-bottom:12px}
    .recipient{font-family:Merriweather,serif;font-size:30px;text-align:center;margin:18px 0;color:var(--text)}
    .desc{text-align:center;font-size:15px;color:var(--muted);line-height:1.6;max-width:760px;margin:0 auto}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:28px}
    .sig-row{display:flex;justify-content:space-between;margin-top:22px;gap:20px}
    .sig{display:flex;flex-direction:column;align-items:center;flex:1}
    .sig .name{font-weight:700}
    .sig .role{font-size:12px;color:var(--muted)}
    .watermark{position:absolute;left:50%;top:46%;transform:translate(-50%,-50%);opacity:0.06;font-size:120px;font-family:Merriweather,serif;color:var(--text);pointer-events:none;user-select:none}
    .idbox{font-size:12px;color:var(--muted);margin-top:10px;text-align:right}
    .disclaimer{font-size:12px;color:var(--muted);text-align:center;margin-top:10px}

    /* small screens */
    @media (max-width:900px){.page{padding:20px;border-width:8px}.page-inner{padding:18px}}
  </style>
</head>
<body>
  <div class="app">
    <div class="panel">
      <h2>Certificate Data & Controls</h2>

      <div class="field">
        <label>Recipient full name</label>
        <input id="recipient" type="text" value="Arya Nargis Ahmed">
      </div>

      <div class="row">
        <div class="field small">
          <label>Award title</label>
          <input id="award" type="text" value="Award of Scientific Excellence">
        </div>
        <div style="width:140px;display:flex;align-items:flex-end">
          <button id="randomAward" class="secondary" style="width:100%">Random</button>
        </div>
      </div>

      <div class="field">
        <label>Reason / Citation</label>
        <textarea id="citation">For outstanding contributions to the field of experimental plant photobiology and exemplary scholarly dedication.</textarea>
      </div>

      <div class="row">
        <div class="field small">
          <label>Date (auto uses system date)</label>
          <input id="date" type="date">
        </div>
        <div class="field small">
          <label>Location</label>
          <input id="location" type="text" value="Dhaka, Bangladesh">
        </div>
      </div>

      <div class="row">
        <div class="field small">
          <label>Issuer name</label>
          <input id="issuer" type="text" value="Youth Research Journal">
        </div>
        <div class="field small">
          <label>Issuer role</label>
          <input id="issuerRole" type="text" value="Program Director">
        </div>
      </div>

      <div class="row">
        <div class="field small">
          <label>Second signer name</label>
          <input id="signer2" type="text" value="N. A. Supervisor">
        </div>
        <div class="field small">
          <label>Second signer role</label>
          <input id="signer2Role" type="text" value="Chair, Selection Committee">
        </div>
      </div>

      <div class="field">
        <label>Custom awards list (JSON array of strings). Click Save to apply.</label>
        <textarea id="awardsJson">["Nobel Prize in Physics","Nobel Prize in Chemistry","Nobel Prize in Physiology or Medicine","Nobel Peace Prize","Nobel Prize in Literature","Award of Scientific Excellence"]</textarea>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="saveAwards" class="secondary">Save list</button>
          <div class="note">You can edit the JSON to add/remove titles.</div>
        </div>
      </div>

      <div class="actions">
        <button id="generateBtn">Generate JPGs (2 pages)</button>
        <button id="previewBtn" class="secondary">Flash Preview</button>
        <div style="flex:1" class="note">Tip: You may edit any field before generating. Files will download automatically for both pages (page1 then page2).</div>
      </div>

      <div class="disclaimer">For educational and non-commercial use only. Not an official or exact replica of any real award certificate.</div>
    </div>

    <div class="preview">
      <!-- Page 1 -->
      <div class="page" id="page1">
        <div class="watermark" id="wm1">AWARD</div>
        <div class="page-inner">
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div style="display:flex;gap:12px;align-items:center">
              <svg width="72" height="72" viewBox="0 0 100 100" aria-hidden>
                <defs>
                  <linearGradient id="gA" x1="0" x2="1"><stop offset="0" stop-color="#d6b66a" /><stop offset="1" stop-color="#9b7a38" /></linearGradient>
                </defs>
                <circle cx="50" cy="50" r="45" fill="url(#gA)" stroke="#b38a2f" stroke-width="2"></circle>
                <g transform="translate(50 50) scale(0.7)" fill="#fff"><path d="M0-30 L8-8 L28-2 L12 8 L16 28 L0 18 L-16 28 L-12 8 L-28-2 L-8-8 Z"></path></g>
              </svg>
              <div>
                <div class="title" id="title1">Award of Scientific Excellence</div>
                <div class="subtitle">Presented to</div>
              </div>
            </div>
            <div style="text-align:right">
              <div style="font-size:12px;color:var(--muted)">Certificate ID</div>
              <div id="certId" style="font-weight:700;margin-top:6px">ID-000000</div>
            </div>
          </div>

          <div class="recipient" id="recipient1">Arya Nargis Ahmed</div>
          <div style="height:1px;background:linear-gradient(90deg,transparent,#e0cfa0,transparent);margin:18px 0"></div>
          <div class="desc" id="citation1">For outstanding contributions to the field of experimental plant photobiology and exemplary scholarly dedication.</div>

          <div class="meta" style="margin-top:28px">
            <div>
              <div style="font-size:13px;color:var(--muted)">Date & place</div>
              <div style="font-weight:700" id="date1">October 12, 2025 — Dhaka, Bangladesh</div>
            </div>
            <div style="text-align:right">
              <div style="font-size:13px;color:var(--muted)">Issued by</div>
              <div style="font-weight:700" id="issuer1">Youth Research Journal</div>
              <div style="font-size:12px;color:var(--muted)" id="issuerRole1">Program Director</div>
            </div>
          </div>

          <div class="sig-row">
            <div class="sig">
              <!-- signature SVG placeholder -->
              <svg width="160" height="60" viewBox="0 0 200 60" aria-hidden>
                <path d="M6 38 C40 10, 70 10, 120 30 C150 42, 180 20, 198 28" fill="none" stroke="#222" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" opacity="0.9"></path>
              </svg>
              <div class="name" id="issuerNameDisplay">Youth Research Journal</div>
              <div class="role" id="issuerRoleDisplay">Program Director</div>
            </div>

            <div class="sig">
              <svg width="160" height="60" viewBox="0 0 200 60" aria-hidden>
                <path d="M6 40 C48 20, 80 25, 140 30 C170 32, 188 24, 198 30" fill="none" stroke="#222" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" opacity="0.9"></path>
              </svg>
              <div class="name" id="signer2Display">N. A. Supervisor</div>
              <div class="role" id="signer2RoleDisplay">Chair, Selection Committee</div>
            </div>
          </div>

          <div class="idbox" id="idbox1">ID: —</div>
          <div class="disclaimer">For educational and non-commercial use only. Not an official or exact replica of any real award certificate.</div>
        </div>
      </div>

      <!-- Page 2: details, citation full, program info -->
      <div class="page" id="page2">
        <div class="watermark" id="wm2">NOBEL</div>
        <div class="page-inner">
          <div style="text-align:center;margin-bottom:10px">
            <div class="title" id="title2">Award of Scientific Excellence</div>
            <div class="subtitle">Certificate of Merit and Details</div>
          </div>

          <div style="display:flex;gap:18px">
            <div style="flex:1">
              <div style="font-weight:700;margin-bottom:6px">Recipient</div>
              <div id="recipient2">Arya Nargis Ahmed</div>

              <div style="font-weight:700;margin-top:14px;margin-bottom:6px">Citation</div>
              <div id="citation2" style="color:var(--muted);line-height:1.6">For outstanding contributions to the field of experimental plant photobiology and exemplary scholarly dedication.</div>
            </div>
            <div style="width:220px">
              <div style="font-weight:700;margin-bottom:6px">Issuer</div>
              <div id="issuer2">Youth Research Journal</div>
              <div style="font-size:13px;color:var(--muted);margin-top:10px">Issuer role</div>
              <div id="issuerRole2">Program Director</div>

              <div style="font-weight:700;margin-top:16px;margin-bottom:6px">Location</div>
              <div id="location2">Dhaka, Bangladesh</div>

              <div style="font-weight:700;margin-top:16px;margin-bottom:6px">Date</div>
              <div id="date2">October 12, 2025</div>
            </div>
          </div>

          <div style="margin-top:26px">
            <div style="font-weight:700;margin-bottom:6px">Program notes</div>
            <div style="color:var(--muted);line-height:1.5">This certificate recognizes the recipient's contribution to research and scholarship during the program. It is issued for educational purposes only and does not imply any affiliation with or endorsement by the Nobel Foundation.</div>
          </div>

          <div style="margin-top:22px;display:flex;justify-content:flex-end">
            <div style="text-align:right">
              <div style="font-size:12px;color:var(--muted)">Signed electronically</div>
              <div style="font-weight:700" id="issuerSign2">Youth Research Journal</div>
              <div style="font-size:12px;color:var(--muted)" id="issuerRoleSign2">Program Director</div>
            </div>
          </div>

          <div class="idbox" id="idbox2">ID: —</div>
        </div>
      </div>
    </div>
  </div>

  <!-- include html2canvas from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    // Elements
    const recipient = document.getElementById('recipient');
    const award = document.getElementById('award');
    const citation = document.getElementById('citation');
    const dateInput = document.getElementById('date');
    const locationInput = document.getElementById('location');
    const issuer = document.getElementById('issuer');
    const issuerRole = document.getElementById('issuerRole');
    const signer2 = document.getElementById('signer2');
    const signer2Role = document.getElementById('signer2Role');

    const title1 = document.getElementById('title1');
    const recipient1 = document.getElementById('recipient1');
    const citation1 = document.getElementById('citation1');
    const date1 = document.getElementById('date1');
    const issuer1 = document.getElementById('issuer1');
    const issuerRole1 = document.getElementById('issuerRole1');
    const issuerNameDisplay = document.getElementById('issuerNameDisplay');
    const issuerRoleDisplay = document.getElementById('issuerRoleDisplay');
    const signer2Display = document.getElementById('signer2Display');
    const signer2RoleDisplay = document.getElementById('signer2RoleDisplay');
    const certId = document.getElementById('certId');
    const idbox1 = document.getElementById('idbox1');

    const title2 = document.getElementById('title2');
    const recipient2 = document.getElementById('recipient2');
    const citation2 = document.getElementById('citation2');
    const issuer2 = document.getElementById('issuer2');
    const issuerRole2 = document.getElementById('issuerRole2');
    const location2 = document.getElementById('location2');
    const date2 = document.getElementById('date2');
    const idbox2 = document.getElementById('idbox2');

    const wm1 = document.getElementById('wm1');
    const wm2 = document.getElementById('wm2');

    // Awards JSON handling
    const awardsJson = document.getElementById('awardsJson');
    let awardsList = JSON.parse(awardsJson.value);
    document.getElementById('saveAwards').addEventListener('click', ()=>{
      try{
        const parsed = JSON.parse(awardsJson.value);
        if(!Array.isArray(parsed)) throw new Error('JSON must be an array of strings');
        awardsList = parsed;
        alert('Saved awards list ('+awardsList.length+' items)');
      }catch(e){
        alert('Invalid JSON: '+e.message);
      }
    });

    // Random award button
    document.getElementById('randomAward').addEventListener('click', ()=>{
      if(awardsList && awardsList.length){
        const pick = awardsList[Math.floor(Math.random()*awardsList.length)];
        award.value = pick;
        updatePreview();
      }else alert('Awards list is empty. Add items and Save.');
    });

    // Default date: system today
    function setTodayDate(){
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth()+1).padStart(2,'0');
      const dd = String(today.getDate()).padStart(2,'0');
      dateInput.value = `${yyyy}-${mm}-${dd}`;
    }
    setTodayDate();

    // Random ID generator
    function genId(){
      const now = Date.now().toString(36).toUpperCase();
      const rnd = Math.floor(Math.random()*9000)+1000;
      return 'EDU-'+now+'-'+rnd;
    }

    // Update preview
    function updatePreview(){
      const loc = locationInput.value || '';
      const formattedDate = (dateInput.value) ? new Date(dateInput.value).toLocaleDateString(undefined,{year:'numeric',month:'long',day:'numeric'}) : '—';

      title1.textContent = award.value || '— Award title —';
      title2.textContent = award.value || '— Award title —';
      recipient1.textContent = recipient.value || '— Recipient —';
      recipient2.textContent = recipient.value || '— Recipient —';
      citation1.textContent = citation.value || '';
      citation2.textContent = citation.value || '';
      date1.textContent = formattedDate + (loc? (' — '+loc): '');
      date2.textContent = formattedDate;
      issuer1.textContent = issuer.value || '';
      issuer2.textContent = issuer.value || '';
      issuerRole1.textContent = issuerRole.value || '';
      issuerRole2.textContent = issuerRole.value || '';
      issuerNameDisplay.textContent = issuer.value || '';
      issuerRoleDisplay.textContent = issuerRole.value || '';
      signer2Display.textContent = signer2.value || '';
      signer2RoleDisplay.textContent = signer2Role.value || '';
      location2.textContent = loc || '';
      wm1.textContent = (award.value || 'AWARD').toUpperCase();
      wm2.textContent = (award.value || 'NOBEL').toUpperCase();

      const id = genId();
      certId.textContent = id;
      idbox1.textContent = 'ID: '+id;
      idbox2.textContent = 'ID: '+id;
    }

    // Wire inputs
    [recipient,award,citation,dateInput,locationInput,issuer,issuerRole,signer2,signer2Role].forEach(el=>el.addEventListener('input', updatePreview));
    updatePreview();

    // Flash preview
    document.getElementById('previewBtn').addEventListener('click', ()=>{
      const p1 = document.getElementById('page1');
      p1.style.transform = 'scale(0.997)';
      setTimeout(()=>p1.style.transform='scale(1)',220);
    });

    // Ensure downloads start sequentially
    async function downloadElementAsJpg(el, filename){
      // give time to render styles
      await new Promise(r=>setTimeout(r,120));
      const scale = 3; // high res
      // ensure white background
      const originalBg = el.style.backgroundColor;
      el.style.backgroundColor = '#ffffff';
      try{
        const canvas = await html2canvas(el, {scale:scale, useCORS:true, backgroundColor:'#ffffff'});
        const dataURL = canvas.toDataURL('image/jpeg', 0.95);
        const link = document.createElement('a');
        link.href = dataURL;
        link.download = filename;
        document.body.appendChild(link);
        link.click();
        link.remove();
        // free canvas blob url if created (not needed here)
      }finally{
        el.style.backgroundColor = originalBg || '';
      }
    }

    document.getElementById('generateBtn').addEventListener('click', async ()=>{
      updatePreview();
      const p1 = document.getElementById('page1');
      const p2 = document.getElementById('page2');
      const nameSafe = (recipient.value||'recipient').replace(/[^a-z0-9_\-]/gi,'_');
      const base = nameSafe + '_' + (new Date().toISOString().slice(0,10));
      try{
        // download page1 then page2
        await downloadElementAsJpg(p1, base + '_page1.jpg');
        // small delay to ensure browser processes previous download
        await new Promise(r=>setTimeout(r,350));
        await downloadElementAsJpg(p2, base + '_page2.jpg');
        alert('Both pages generated. Check your downloads folder.');
      }catch(err){
        alert('Error generating images: '+err.message);
      }
    });

    // Accessibility: Enter key on awards json save
    awardsJson.addEventListener('keydown', (e)=>{ if(e.key==='Enter' && (e.ctrlKey||e.metaKey)) document.getElementById('saveAwards').click(); });

    // Ensure preview updates when page becomes visible (date may change)
    window.addEventListener('focus', ()=>{
      // refresh date to system date in case changed
      setTodayDate();
      updatePreview();
    });

  </script>
</body>
</html>
